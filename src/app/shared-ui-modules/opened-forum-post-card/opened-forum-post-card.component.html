<ng-container *ngIf="forumPost$ | async">
  <div class="p-3 w-full fadein animation-duration-500 p-component shadow-2">
    <div class="flex justify-content-between align-content-center">
      <div class="flex">
        <p-avatar styleClass="mr-2" size="large" shape="circle"></p-avatar>
        <div class="text-xl font-bold mt-1">
          {{ (forumPost$ | async)?.title | uppercase }}
          <div class="text-sm">
            {{ (forumPost$ | async)?.submitter.username }}
          </div>
        </div>
      </div>
    </div>
    <div
      class="mt-2"
      [innerHTML]="
        domSanitizer.bypassSecurityTrustHtml(
          (forumPost$ | async)?.content || ''
        )
      "
    ></div>
    <ng-container *ngIf="(forumPost$ | async)?.images?.length! > 0">
      <div class="flex h-auto justify-content-center align-items-center mt-2">
        <div
          class="col-6 md:col-4 xl:col-3"
          *ngFor="let image of (forumPost$ | async)?.images"
        >
          <p-image
            [src]="image.image"
            [preview]="true"
            imageClass="w-full h-full border-round border-gray-800 border-solid"
          ></p-image>
        </div>
      </div>
    </ng-container>
    <div class="flex justify-content-between align-items-center mt-2">
      <div>
        <button
          [style.visibility]="showCommentForm ? 'hidden' : 'visible'"
          pButton
          class="
            p-button-text p-button-danger
            justify-content-center
            align-self-end
          "
          icon="pi pi-reply"
          label="Reply"
          (click)="displayCommentForm()"
        ></button>
      </div>
      <div>
        <app-votes
          (dislikeClickEvent)="dislikeForumPost()"
          (likeClickEvent)="likeForumPost()"
          [dislikeCount]="(forumPost$ | async)?.downvotes || 0"
          [likeCount]="(forumPost$ | async)?.upvotes || 0"
          [type]="CommentType.ForumPost"
          [id]="(forumPost$ | async)?.id"
        ></app-votes>
      </div>

      <div>
        <app-comments
          [commentCount]="(forumPost$ | async)?.comments?.length || 0"
        ></app-comments>
      </div>
    </div>

    <div *ngIf="showCommentForm" class="mt-2">
      <app-comment-form
        (commentAddEvent)="addCommentToForumPost($event)"
        (cancelEvent)="hideCommentForm()"
      ></app-comment-form>
    </div>
  </div>
  <ng-container *ngIf="(forumComments$ | async)?.length">
    <div
      class="mt-3"
      *ngFor="let comment of forumComments$ | async; trackBy: trackById"
    >
      <app-comment-card
        [comment]="comment"
        [loadSubCommentsOnClick]="true"
      ></app-comment-card>
      <ng-container></ng-container>
    </div>
  </ng-container>
</ng-container>
