<ng-container *ngIf="forumPost$ | async">
  <div class="p-2 w-full fadein animation-duration-500 p-component">
    <div class="text-3xl font-bold">
      {{ (forumPost$ | async)?.title | uppercase }}
    </div>
    <div class="text-sm">Author Name | Date</div>
    <div
      class="mt-2"
      [innerHTML]="
        domSanitizer.bypassSecurityTrustHtml(
          (forumPost$ | async)?.content || ''
        )
      "
    ></div>
    <hr />
    <div class="flex justify-content-between align-items-center">
      <div>
        <app-comments
          [commentCount]="(forumPost$ | async)?.comment_count || 0"
        ></app-comments>
      </div>
      <div>
        <app-votes
          (dislikeClickEvent)="dislikeForumPost()"
          (likeClickEvent)="likeForumPost()"
          [dislikeCount]="(forumPost$ | async)?.downvotes || 0"
          [likeCount]="(forumPost$ | async)?.upvotes || 0"
        ></app-votes>
      </div>
      <div>
        <button
          [style.visibility]="showCommentForm ? 'hidden' : 'visible'"
          pButton
          class="
            p-button-outlined p-button-danger
            justify-content-center
            align-self-end
          "
          icon="pi pi-reply"
          label="Comment"
          (click)="displayCommentForm()"
        ></button>
      </div>
    </div>

    <div *ngIf="showCommentForm" class="fadein animation-duration-1000">
      <app-comment-form
        (commentAddEvent)="addCommentToForumPost($event)"
        (cancelEvent)="hideCommentForm()"
      ></app-comment-form>
    </div>
  </div>
  <ng-container *ngIf="(forumComments$ | async)?.length">
    <div
      class="mt-3"
      *ngFor="let comment of forumComments$ | async; trackBy: trackById"
    >
      <app-comment-card
        [comment]="comment"
        [loadSubCommentsOnClick]="true"
      ></app-comment-card>
      <ng-container></ng-container>
    </div>
  </ng-container>
</ng-container>
