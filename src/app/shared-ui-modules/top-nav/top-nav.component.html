<p-menubar
  [model]="(items$ | async) || []"
  [autoDisplay]="true"
  styleClass="sticky z-1 border-none border-noround p-divider-no-background bg-darkblue"
>
  <ng-template pTemplate="start">
    <div
      class="flex align-content-center flex-row justify-content-between w-full"
    >
      <div class="lg:hidden mr-3">
        <app-back-button></app-back-button>
      </div>

      <div
        class="flex align-content-end justify-content-center text-lg font-bold fadein text-white animation-duration-500 animation-ease-in-out cursor-pointer hover:font-italic hover:text-pink-600 align-self-center"
        routerLink="/"
      >
        <div>&nbsp;&nbsp;MSME GATEWAY</div>
      </div>

      <div class="xl:hidden flex justify-content-between align-items-center">
        <button
          class="p-button-outlined p-button-rounded p-button-secondary mr-1"
          icon="pi pi-search"
          pStyleClass=".searchButton"
          enterClass="hidden"
          enterActiveClass="flex"
          enterToClass="flex"
          leaveClass="flex"
          leaveActiveClass="fadeoutup"
          leaveToClass="hidden"
          pButton
        ></button>
        <ng-container [ngTemplateOutlet]="userLoginMenu"></ng-container>
      </div>
    </div>
  </ng-template>

  <ng-template pTemplate="end">
    <ng-container>
      <div class="flex justify-content-between align-items-center">
        <ng-container [ngTemplateOutlet]="search"></ng-container>
        <ng-container [ngTemplateOutlet]="userLoginMenu"></ng-container>
      </div>
    </ng-container>
  </ng-template>
</p-menubar>

<div
  class="absolute w-full h-4rem hidden surface-600 animation-duration-500 animation-ease-out justify-content-center align-items-center fadeinup p-1 searchButton xl:hidden"
>
  <div>
    <ng-container [ngTemplateOutlet]="search"></ng-container>
  </div>
</div>

<ng-template #search>
  <div>
    <input
      type="text"
      pInputText
      class="w-18rem sm:w-18rem md:w-18rem mr-3"
      placeholder="What are you looking for? (4 or more characters)"
      [formControl]="searchInputControl"
      enterPressed
      (onEnterPressed)="searchTerm()"
    />
    <button
      pButton
      icon="pi pi-search"
      class="p-button-rounded p-button-secondary"
      [disabled]="searchInputControl.invalid"
      (click)="$event.stopPropagation(); searchTerm()"
      pStyleClass=".searchButton"
      enterClass="hidden"
      enterActiveClass="flex"
      enterToClass="flex"
      leaveClass="flex"
      leaveActiveClass="fadeoutup"
      leaveToClass="hidden"
    ></button>
  </div>
</ng-template>

<ng-template #userLoginMenu>
  <button
    *ngIf="isLoggedIn$ | async; else login"
    class="p-button-outlined p-button-rounded p-button-secondary ml-3 relative"
    icon="pi pi-user"
    pButton
    (click)="loginMenu.toggle($event)"
  ></button>
  <p-menu
    #loginMenu
    [popup]="true"
    [model]="(loggedInMenu | async) ?? []"
    styleClass="loginMenu"
  ></p-menu>
</ng-template>
<!-- (click)="goToLoginPage()" -->

<ng-template #login>
  <button
    class="p-button-text p-button-rounded p-button-info mr-1"
    icon="pi pi-user"
    label="Login"
    pButton
    (click)="goToLoginPage()"
  ></button>
  <!-- (click)="signup.toggle($event)" -->
  <!-- <p-menu #signup [popup]="true" [model]="signUpMenu"></p-menu> -->
</ng-template>
