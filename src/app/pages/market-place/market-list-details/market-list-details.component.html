<ng-container *ngIf="product$ | async; else loading">
  <div class="text-center flex justify-content-center flex-column">
    <div class="text-lg md:text-2xl m-0 font-bold mb-2">
      {{ (product$ | async).product.name | uppercase }}
    </div>
    <p-galleria
      [value]="(product$ | async).product.images"
      [responsiveOptions]="responsiveOptions"
      [autoPlay]="true"
      [circular]="true"
      [(visible)]="displayImage"
      [(activeIndex)]="activeIndex"
      [fullScreen]="true"
      [showThumbnails]="false"
      [showItemNavigators]="true"
    >
      <ng-template pTemplate="item" let-item>
        <img [src]="item.image" [alt]="item.title" class="h-17rem" />
        <!-- [preview]="true" -->
        <!-- </img> -->
      </ng-template>
      <ng-template pTemplate="thumbnail" let-item>
        <div class="grid grid-nogutter">
          <img [src]="item.image" class="w-7rem h-7rem" />
        </div>
      </ng-template>
    </p-galleria>
    <div
      *ngIf="(product$ | async).product.images"
      class="grid col-12 justify-content-center align-items-center"
    >
      <div
        *ngFor="let img of (product$ | async).product.images; let index = index"
        class="col-2"
      >
        <img
          [src]="img.image"
          [alt]="img.name"
          class="
            cursor-pointer
            w-full
            h-auto
            object-fit-cover
            thumbnail
            transition-all transition-duration-300 transition-ease-in-out
          "
          (click)="imageClick(index)"
        />
      </div>
    </div>
  </div>
  <div class="flex text-lg shadow-1 p-4">
    <div class="flex-auto flex">
      <div class="font-bold text-left">Type :</div>
      <p-message
        [severity]="(product$ | async).ad_type === 'offer' ? 'info' : 'warn'"
        [text]="(product$ | async).ad_type | uppercase"
        styleClass="p-message-no-icon"
      ></p-message>
    </div>

    <div class="flex-auto flex align-items-center justify-content-center">
      <i class="pi pi-tag mr-1 text-blue-500"></i>
      <ng-container
        *ngFor="let tag of (product$ | async).product.tags; let last = last"
      >
        <p-tag [value]="tag.name" severity="info" class="mr-1"></p-tag>
      </ng-container>
    </div>

    <div class="flex-auto flex justify-content-end">
      <i class="pi pi-info-circle mr-1 text-pink-700"></i>
      <ng-container
        *ngFor="
          let ptype of (product$ | async).product.product_type;
          let last = last
        "
      >
        <p-tag [value]="ptype.name" severity="danger" class="mr-1"></p-tag>
      </ng-container>
    </div>
  </div>

  <div class="flex text-lg shadow-1 p-4 mt-3">
    <div class="flex-auto flex">
      <div class="font-bold text-left">Price</div>
      : {{ (product$ | async).product.price }}
    </div>
    <div class="flex-auto flex align-items-center justify-content-center">
      <div class="font-bold text-left">Author</div>
      : {{ (product$ | async).author.username }}
    </div>
    <div class="flex-auto flex justify-content-end">
      <div class="font-bold">Contact</div>
      : {{ (product$ | async).cellphone | uppercase }}
    </div>
  </div>

  <div class="flex text-lg shadow-1 p-4 mt-3">
    <div class="flex-auto flex align-items-center">
      <div class="font-bold text-left">Location</div>
      : {{ (product$ | async).location }}
    </div>
    <div class="flex-auto flex align-items-center justify-content-center">
      <div class="font-bold text-left">Ghana Post</div>
      : {{ (product$ | async).gh_post }}
    </div>
    <div class="flex-auto flex align-items-center justify-content-end">
      <div class="font-bold">District</div>
      : {{ (product$ | async).district.name }}
    </div>
  </div>

  <div class="text-lg shadow-1 p-4 mt-4">
    <div class="mb-3 font-bold text-left">Description</div>
    <div class="text-justify">
      {{ (product$ | async).product.description }}
    </div>
  </div>

  <div class="text-lg p-3 mt-5">
    Related items

    <hr />
  </div>
</ng-container>
<ng-template #loading>
  <p-skeleton></p-skeleton>
</ng-template>
